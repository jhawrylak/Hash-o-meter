<script class="include" type="text/javascript" src="/assets/jquery.jqplot.min.js"></script>
<script class="include" language="javascript" type="text/javascript" src="/assets/jqplot.barRenderer.min.js"></script>
<script class="include" language="javascript" type="text/javascript" src="/assets/jqplot.categoryAxisRenderer.min.js"></script>
<script class="include" language="javascript" type="text/javascript" src="/assets/jqplot.pointLabels.min.js"></script>
<script type="text/javascript">
	$(function() { });
	var refresh = function() {  
		$.get('/pages/plot_values',
					function(data)
					{
						// alert(data.times);
						$('#chart').html('').width((18*data.times.length)+30);
						$('#content').width(Math.max((18*data.times.length)+60,800));
						$('#stats').html(data.total)
						var plot1 = $.jqplot('chart', [data.vals], {
						        seriesDefaults:{
						            renderer:$.jqplot.BarRenderer,
						            rendererOptions: {fillToZero: true}
						        },
						        series:[
						            {label:'Tweets'}
						        ],
						        axes: {
						            xaxis: {
						                renderer: $.jqplot.CategoryAxisRenderer,
						                ticks: data.times,
										label: 'minutes ago'
						            },
						            yaxis: {
						                pad: 1.05
						            }
						        }
						    });
						setTimeout(refresh,10000);
						});
					};
		setTimeout(refresh,1000);
</script>
<div><p id="stats"></p>
	<p>Random Tweets:
	<p><ul style="list-style:none;"><% @tweets.each do |twt| %>
		<li style="padding-bottom:10px;"><%= "#{twt.user}: #{twt.text}" %></li>
		<% end %>
	</ul></p>
	<p>Start tracking: <%= link_to 'Click', :pages_new%>
</div>


<div id="chart" style="margin-left:auto;margin-right:auto;height:300px;" />

